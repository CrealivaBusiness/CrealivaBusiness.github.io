<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>360 Panorama â€“ Wedding Project</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
</head>
<body>

<section id="panorama" style="
  width:100%;
  max-width:1100px;
  height:45vh;
  min-height:260px;
  max-height:420px;
  margin:80px auto;
  border-radius:18px;
  overflow:hidden;
">

  <div id="pano" style="width:100%; height:100%;"></div>

</section>

<script src="https://unpkg.com/marzipano@0.10.2/dist/marzipano.js"></script>

<script>
  const panoElement = document.getElementById('pano');

  const isMobile = window.innerWidth < 768;

  const viewer = new Marzipano.Viewer(panoElement, {
    controls: { mouseViewMode: 'drag' }
  });

  const source = Marzipano.ImageUrlSource.fromString(
    "https://raw.githubusercontent.com/CrealivaBusiness/CrealivaBusiness.github.io/main/Panoramawcr.jpg"
  );

  const geometry = new Marzipano.EquirectGeometry([{ width: 4000 }]);

  /* ===== FOV SETTING ===== */
  const DEFAULT_FOV = isMobile ? Math.PI / 4 : Math.PI / 2.2;
  const MIN_FOV = Math.PI / 8;   // zoom in max (~3x)
  const MAX_FOV = Math.PI / 2;   // zoom out max (~0.5x)

  const limiter = Marzipano.RectilinearView.limit.traditional(
    1024,
    Math.PI
  );

  const view = new Marzipano.RectilinearView(
    { yaw: 0, pitch: 0, fov: DEFAULT_FOV },
    limiter
  );

  const scene = viewer.createScene({
    source,
    geometry,
    view
  });

  scene.switchTo();

  /* ===== DESKTOP SCROLL ZOOM ===== */
  panoElement.addEventListener('wheel', e => {
    e.preventDefault();

    const newFov = Math.max(
      MIN_FOV,
      Math.min(MAX_FOV, view.fov() + e.deltaY * 0.004)
    );

    view.setFov(newFov);
  }, { passive: false });

  /* ===== MOBILE PINCH ZOOM ===== */
  let startDist = null;

  panoElement.addEventListener('touchstart', e => {
    if (e.touches.length === 2) {
      startDist = Math.hypot(
        e.touches[0].pageX - e.touches[1].pageX,
        e.touches[0].pageY - e.touches[1].pageY
      );
    }
  }, { passive: false });

  panoElement.addEventListener('touchmove', e => {
    if (e.touches.length === 2 && startDist) {
      e.preventDefault();

      const newDist = Math.hypot(
        e.touches[0].pageX - e.touches[1].pageX,
        e.touches[0].pageY - e.touches[1].pageY
      );

      const delta = (startDist - newDist) * 0.005;

      const newFov = Math.max(
        MIN_FOV,
        Math.min(MAX_FOV, view.fov() + delta)
      );

      view.setFov(newFov);
      startDist = newDist;
    }
  }, { passive: false });
</script>


</body>
</html>

