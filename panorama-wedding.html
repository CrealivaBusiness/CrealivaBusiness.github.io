<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>360 Panorama â€“ Wedding Project</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
</head>
<body>

<section id="panorama" style="
  width:100%;
  max-width:1100px;
  height:320px;
  margin:80px auto;
  border-radius:18px;
  overflow:hidden;
">

  <div id="pano" style="width:100%; height:100%;"></div>

</section>

<script src="https://unpkg.com/marzipano@0.10.2/dist/marzipano.js"></script>

<script>
  const panoElement = document.getElementById('pano');

  const viewer = new Marzipano.Viewer(panoElement, {
    controls: {
      mouseViewMode: 'drag'
    }
  });

  const source = Marzipano.ImageUrlSource.fromString(
    "https://raw.githubusercontent.com/CrealivaBusiness/CrealivaBusiness.github.io/main/Panoramawcr.jpg"
  );

  const geometry = new Marzipano.EquirectGeometry([{ width: 4000 }]);

  const limiter = Marzipano.RectilinearView.limit.traditional(
    1024,
    Math.PI
  );

  const view = new Marzipano.RectilinearView(
    {
      yaw: 0,
      pitch: 0,
      fov: Math.PI / 2
    },
    limiter
  );

  const scene = viewer.createScene({
    source,
    geometry,
    view
  });

  scene.switchTo();

  /* DESKTOP: MOUSE WHEEL ZOOM */
  panoElement.addEventListener('wheel', e => {
    e.preventDefault();
    const fov = view.fov();
    const newFov = Math.max(
      Math.PI / 6,
      Math.min(Math.PI / 1.3, fov + e.deltaY * 0.002)
    );
    view.setFov(newFov);
  }, { passive: false });

  /* MOBILE: PINCH ZOOM */
  let startDist = 0;

  panoElement.addEventListener('touchstart', e => {
    if (e.touches.length === 2) {
      startDist = Math.hypot(
        e.touches[0].pageX - e.touches[1].pageX,
        e.touches[0].pageY - e.touches[1].pageY
      );
    }
  }, { passive:false });

  panoElement.addEventListener('touchmove', e => {
    if (e.touches.length === 2) {
      e.preventDefault();
      const newDist = Math.hypot(
        e.touches[0].pageX - e.touches[1].pageX,
        e.touches[0].pageY - e.touches[1].pageY
      );

      const delta = (startDist - newDist) * 0.003;
      view.setFov(
        Math.max(
          Math.PI / 6,
          Math.min(Math.PI / 1.3, view.fov() + delta)
        )
      );

      startDist = newDist;
    }
  }, { passive:false });
</script>


</section>


</body>
</html>

